fragment basicSessionFields on Session {
  id
  createdAt
  lastUpdated
}

fragment pieceFields on Piece {
  color
  type
}

fragment squareXYFields on Square {
  file
  rank
}

fragment boardFields on Board {
  id
  squares {
    ...squareXYFields
    name
    piece {
      ...pieceFields
    }
  }
  whiteKingLocation {
    ...squareXYFields
    name
  }
  blackKingLocation {
    ...squareXYFields
    name
  }
}

query PlayGame($gameId: ID!, $userId: ID!) {
  playGame(gameId: $gameId, userId: $userId) {
    ...basicSessionFields
    players {
      ...userWithId
    }
    gameState {
      gameStarted
      gameOver
      currentTurn
    }
    # get id to check availability and reroute if nonexistent
    board {
      id
    }
  }
}

query GetBoard($gameId: ID!, $userId: ID!) {
  playGame(gameId: $gameId, userId: $userId) {
    ...basicSessionFields
    board {
      ...boardFields
    }
  }
}

query GetMoves($id: Int) {
  testGetMoves(id: $id) {
    regularMoves {
      file
    }
    eagerMoves {
      file
    }
  }
}

mutation FindGame($userId: ID!) {
  findGame(userId: $userId) {
    elapsedTime
  }
}

mutation MovePiece($gameId: ID!, $from: SquareXYInput!, $to: SquareXYInput!) {
  movePiece(gameId: $gameId, from: $from, to: $to) {
    ...boardFields
  }
}

subscription MatchFound($userId: ID!) {
  matchFound(userId: $userId) {
    ...basicSessionFields
  }
}

subscription BoardChanged($userId: ID!) {
  boardChanged(userId: $userId) {
    ...boardFields
  }
}
